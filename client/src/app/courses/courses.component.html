<div class="courses-page">
  <div class="page-header">
    <div class="container">
      <h1>–ö—É—Ä—Å–æ–≤–µ –ø–æ –≥–æ—Ç–≤–µ–Ω–µ</h1>
      <p class="lead">–û—Ç–∫—Ä–∏–π—Ç–µ –Ω–∞—à–∏—Ç–µ –∫—É—Ä—Å–æ–≤–µ –ø–æ –≥–æ—Ç–≤–µ–Ω–µ –∏ –ø–æ–¥–æ–±—Ä–µ—Ç–µ –≤–∞—à–∏—Ç–µ –∫—É–ª–∏–Ω–∞—Ä–Ω–∏ —É–º–µ–Ω–∏—è</p>
    </div>
  </div>

  <div class="container">
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-section">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</span>
      </div>
      <p>–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∫—É—Ä—Å–æ–≤–µ—Ç–µ...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-section">
      <div class="alert alert-danger" role="alert">
        <i class="fas fa-exclamation-triangle"></i>
        {{ error }}
        <button class="btn btn-outline-danger btn-sm ms-3" (click)="loadCourses()">
          –û–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ
        </button>
      </div>
    </div>

    <!-- No Courses State -->
    <div *ngIf="!loading && !error && courses.length === 0" class="no-courses-section">
      <div class="text-center py-5">
        <i class="fas fa-utensils fa-3x text-muted mb-3"></i>
        <h3>–í—Å–µ –æ—â–µ –Ω—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ –∫—É—Ä—Å–æ–≤–µ</h3>
        <p class="text-muted">–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –æ—Ç–Ω–æ–≤–æ –ø–æ-–∫—ä—Å–Ω–æ –∑–∞ –Ω–æ–≤–∏ –∫—É—Ä—Å–æ–≤–µ –ø–æ –≥–æ—Ç–≤–µ–Ω–µ</p>
      </div>
    </div>

    <!-- Courses Table -->
    <div *ngIf="!loading && !error && courses.length > 0" class="courses-table-section">
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead class="table-dark">
            <tr>
              <th>–ö—É—Ä—Å</th>
              <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
              <th>–î–µ–Ω</th>
              <th>–í—Ä–µ–º–µ</th>
              <th>–ü—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç</th>
              <th>–ú–∞–∫—Å. —Å—Ç—É–¥–µ–Ω—Ç–∏</th>
              <th>–°—Ç–∞—Ç—É—Å</th>
              <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let course of courses" class="course-row">
              <td>
                <strong>{{ course.title }}</strong>
              </td>
              <td>{{ course.description }}</td>
              <td>
                <span class="badge bg-primary">{{ course.day }}</span>
              </td>
              <td>
                <span class="badge bg-info">{{ course.time }}</span>
              </td>
              <td>{{ course.duration }} –º–∏–Ω</td>
              <td>
                <span class="enrollment-count">
                  {{ course.enrolledStudents || 0 }} / {{ course.maxStudents }}
                </span>
                <div class="enrollment-progress">
                  <div class="progress-bar"
                    [style.width.%]="((course.enrolledStudents || 0) / course.maxStudents) * 100">
                  </div>
                </div>
              </td>
              <td>
                <span class="badge bg-success">{{ course.status }}</span>
              </td>
              <td>
                <button *ngIf="isLoggedIn && !isEnrolled(course._id)" (click)="enrollInCourse(course)"
                  class="btn btn-success btn-sm" [disabled]="course.enrolledStudents >= course.maxStudents">
                  üìö –ó–∞–ø–∏—à–∏ —Å–µ
                </button>
                <div *ngIf="isEnrolled(course._id)">
                  <span class="badge bg-info me-2">‚úÖ –ó–∞–ø–∏—Å–∞–Ω</span>
                  <button (click)="unenrollFromCourse(course)" class="btn btn-outline-danger btn-sm">
                    üö´ –û—Ç–ø–∏—à–∏ —Å–µ
                  </button>
                </div>
                <span *ngIf="!isLoggedIn" class="text-muted">
                  –í–ª–µ–∑—Ç–µ –∑–∞ –¥–∞ —Å–µ –∑–∞–ø–∏—à–µ—Ç–µ
                </span>
                <span *ngIf="course.enrolledStudents >= course.maxStudents" class="badge bg-warning">
                  üö´ –ü—ä–ª–µ–Ω
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>
</div>