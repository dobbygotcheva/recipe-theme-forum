<!-- SIMPLE TEST COMPONENT -->
<div
  style="background-color: #ff0000; color: white; padding: 50px; text-align: center; font-size: 32px; font-weight: bold; border: 10px solid #00ff00;">
  üéØ SIMPLE TEST COMPONENT LOADED! üéØ
  <br><br>
  <p style="font-size: 18px;">If you can see this, the component is working!</p>
  <br>
  <button
    style="background-color: #00ff00; color: black; padding: 20px; font-size: 24px; border: none; border-radius: 10px; cursor: pointer;"
    (click)="testClick()">
    üß™ TEST BUTTON - CLICK ME!
  </button>
  <br><br>
  <p style="font-size: 16px;">Component loaded at: {{ getCurrentTime() }}</p>
</div>

<!-- ORIGINAL COMPONENT CONTENT -->
<div class="course-schedule-management">
  <div class="header">
    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ–¥–º–∏—á–Ω–∏ –∫—É—Ä—Å–æ–≤–µ –ø–æ –≥–æ—Ç–≤–µ–Ω–µ</h2>
    <button class="btn btn-primary" (click)="showCreateForm = !showCreateForm; showEditForm = false; resetForm()"
      [disabled]="loading">
      <i class="fas fa-plus"></i> –°—ä–∑–¥–∞–π –Ω–æ–≤ –∫—É—Ä—Å
    </button>
  </div>

  <!-- Create/Edit Form -->
  <div class="form-container" *ngIf="showCreateForm || showEditForm">
    <div class="card">
      <div class="card-header">
        <h4>{{ editingSchedule ? '–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π –∫—É—Ä—Å' : '–°—ä–∑–¥–∞–π –Ω–æ–≤ –∫—É—Ä—Å' }}</h4>
        <button class="btn btn-sm btn-outline-secondary" (click)="resetForm()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="card-body">
        <form [formGroup]="courseForm" (ngSubmit)="onSubmit()">
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="title">–ó–∞–≥–ª–∞–≤–∏–µ –Ω–∞ –∫—É—Ä—Å–∞ *</label>
                <input type="text" id="title" class="form-control" formControlName="title"
                  placeholder="–í—ä–≤–µ–¥–µ—Ç–µ –∑–∞–≥–ª–∞–≤–∏–µ –Ω–∞ –∫—É—Ä—Å–∞">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="instructorId">–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä *</label>
                <select id="instructorId" class="form-control" formControlName="instructorId">
                  <option value="">–ò–∑–±–µ—Ä–µ—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä</option>
                  <option *ngFor="let user of users" [value]="user._id">
                    {{ user.username }}
                  </option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <textarea id="description" class="form-control" rows="3" formControlName="description"
              placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∫—É—Ä—Å–∞"></textarea>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label for="weekStartDate">–ù–∞—á–∞–ª–æ –Ω–∞ —Å–µ–¥–º–∏—Ü–∞—Ç–∞ *</label>
                <input type="date" id="weekStartDate" class="form-control" formControlName="weekStartDate">
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label for="weekEndDate">–ö—Ä–∞–π –Ω–∞ —Å–µ–¥–º–∏—Ü–∞—Ç–∞ *</label>
                <input type="date" id="weekEndDate" class="form-control" formControlName="weekEndDate">
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label for="price">–¶–µ–Ω–∞ (–ª–≤.)</label>
                <input type="number" id="price" class="form-control" formControlName="price" placeholder="0.00">
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="maxParticipants">–ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –±—Ä–æ–π —É—á–∞—Å—Ç–Ω–∏—Ü–∏</label>
                <input type="number" id="maxParticipants" class="form-control" formControlName="maxParticipants"
                  placeholder="–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω">
              </div>
            </div>
          </div>

          <!-- Weekly Courses -->
          <div class="courses-section">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5>–°–µ–¥–º–∏—á–Ω–∏ –∑–∞–Ω—è—Ç–∏—è</h5>
              <button type="button" class="btn btn-sm btn-outline-primary" (click)="addCourse()">
                <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏ –∑–∞–Ω—è—Ç–∏–µ
              </button>
            </div>

            <div formArrayName="courses" class="courses-list">
              <div *ngFor="let course of coursesArray.controls; let i = index" [formGroupName]="i"
                class="course-item card mb-3">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-start mb-2">
                    <h6>–ó–∞–Ω—è—Ç–∏–µ {{ i + 1 }}</h6>
                    <button type="button" class="btn btn-sm btn-outline-danger" (click)="removeCourse(i)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>

                  <div class="row">
                    <div class="col-md-3">
                      <div class="form-group">
                        <label>–î–µ–Ω –æ—Ç —Å–µ–¥–º–∏—Ü–∞—Ç–∞ *</label>
                        <select class="form-control" formControlName="dayOfWeek">
                          <option value="">–ò–∑–±–µ—Ä–µ—Ç–µ –¥–µ–Ω</option>
                          <option *ngFor="let day of weekDays" [value]="day.value">
                            {{ day.label }}
                          </option>
                        </select>
                      </div>
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label>–ù–∞—á–∞–ª–æ *</label>
                        <input type="time" class="form-control" formControlName="startTime">
                      </div>
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label>–ö—Ä–∞–π *</label>
                        <input type="time" class="form-control" formControlName="endTime">
                      </div>
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label>–ü—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç (–º–∏–Ω.) *</label>
                        <input type="number" class="form-control" formControlName="duration">
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-group">
                        <label>–ù–∏–≤–æ *</label>
                        <select class="form-control" formControlName="difficulty">
                          <option *ngFor="let diff of difficulties" [value]="diff.value">
                            {{ diff.label }}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>–ó–∞–≥–ª–∞–≤–∏–µ –Ω–∞ –∑–∞–Ω—è—Ç–∏–µ—Ç–æ *</label>
                        <input type="text" class="form-control" formControlName="title" placeholder="–ó–∞–≥–ª–∞–≤–∏–µ">
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>–†–µ—Ü–µ–ø—Ç–∞ (–ø–æ –∂–µ–ª–∞–Ω–∏–µ)</label>
                        <select class="form-control" formControlName="recipeId">
                          <option value="">–ë–µ–∑ —Ä–µ—Ü–µ–ø—Ç–∞</option>
                          <option *ngFor="let theme of themes" [value]="theme._id">
                            {{ theme.title }}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–∞–Ω—è—Ç–∏–µ—Ç–æ</label>
                    <textarea class="form-control" rows="2" formControlName="description"
                      placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                  </div>

                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>–ú–∞—Ç–µ—Ä–∏–∞–ª–∏</label>
                        <input type="text" class="form-control" formControlName="materials"
                          placeholder="–ú–∞—Ç–µ—Ä–∏–∞–ª–∏, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏ —Å—ä—Å –∑–∞–ø–µ—Ç–∞—è">
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>–ë–µ–ª–µ–∂–∫–∏</label>
                        <input type="text" class="form-control" formControlName="notes"
                          placeholder="–î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –±–µ–ª–µ–∂–∫–∏">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary" [disabled]="!courseForm.valid || loading">
              <i class="fas fa-save"></i> {{ editingSchedule ? '–û–±–Ω–æ–≤–∏' : '–°—ä–∑–¥–∞–π' }}
            </button>
            <button type="button" class="btn btn-secondary ml-2" (click)="resetForm()">
              –û—Ç–∫–∞–∑
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Course Schedules List -->
  <div class="schedules-list" *ngIf="!showCreateForm && !showEditForm">
    <div class="card">
      <div class="card-header">
        <h4>–°—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏ –∫—É—Ä—Å–æ–≤–µ</h4>
      </div>
      <div class="card-body">
        <div *ngIf="loading" class="text-center">
          <div class="spinner-border" role="status">
            <span class="sr-only">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</span>
          </div>
        </div>

        <div *ngIf="!loading && courseSchedules.length === 0" class="text-center text-muted">
          <p>–í—Å–µ –æ—â–µ –Ω—è–º–∞ —Å—ä–∑–¥–∞–¥–µ–Ω–∏ –∫—É—Ä—Å–æ–≤–µ</p>
        </div>

        <div *ngIf="!loading && courseSchedules.length > 0" class="schedules-grid">
          <div *ngFor="let schedule of courseSchedules" class="schedule-card card mb-3">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h5 class="mb-0">{{ schedule.title }}</h5>
              <span [class]="'badge ' + getStatusBadgeClass(schedule.status)">
                {{ getStatusText(schedule.status) }}
              </span>
            </div>
            <div class="card-body">
              <p class="text-muted">{{ schedule.description }}</p>

              <div class="schedule-info">
                <div class="row">
                  <div class="col-md-6">
                    <p><strong>–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:</strong> {{ schedule.instructorName }}</p>
                    <p><strong>–ü–µ—Ä–∏–æ–¥:</strong> {{ schedule.weekStartDate | date:'dd.MM.yyyy' }} - {{
                      schedule.weekEndDate | date:'dd.MM.yyyy' }}</p>
                    <p><strong>–ë—Ä–æ–π –∑–∞–Ω—è—Ç–∏—è:</strong> {{ schedule.courses.length }}</p>
                  </div>
                  <div class="col-md-6">
                    <p *ngIf="schedule.price"><strong>–¶–µ–Ω–∞:</strong> {{ schedule.price }} –ª–≤.</p>
                    <p *ngIf="schedule.maxParticipants"><strong>–ú–∞–∫—Å. —É—á–∞—Å—Ç–Ω–∏—Ü–∏:</strong> {{ schedule.maxParticipants }}
                    </p>
                  </div>
                </div>
              </div>

              <div class="courses-preview mt-3">
                <h6>–ó–∞–Ω—è—Ç–∏—è –∑–∞ —Å–µ–¥–º–∏—Ü–∞—Ç–∞:</h6>
                <div class="courses-timeline">
                  <div *ngFor="let course of schedule.courses" class="course-timeline-item">
                    <div class="course-day">{{ getDayLabel(course.dayOfWeek) }}</div>
                    <div class="course-time">{{ course.startTime }} - {{ course.endTime }}</div>
                    <div class="course-title">{{ course.title }}</div>
                    <span
                      [class]="'badge badge-sm ' + (course.difficulty === 'beginner' ? 'badge-success' : course.difficulty === 'intermediate' ? 'badge-warning' : 'badge-danger')">
                      {{ getDifficultyLabel(course.difficulty) }}
                    </span>
                  </div>
                </div>
              </div>

              <div class="card-actions mt-3">
                <button class="btn btn-sm btn-outline-primary" (click)="editSchedule(schedule)">
                  <i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π
                </button>
                <button class="btn btn-sm btn-outline-danger ml-2" (click)="deleteSchedule(schedule._id)">
                  <i class="fas fa-trash"></i> –ò–∑—Ç—Ä–∏–π
                </button>

                <div class="btn-group ml-2" role="group">
                  <button *ngIf="schedule.status === 'draft'" class="btn btn-sm btn-outline-success"
                    (click)="toggleStatus(schedule, 'published')">
                    <i class="fas fa-check"></i> –ü—É–±–ª–∏–∫—É–≤–∞–π
                  </button>
                  <button *ngIf="schedule.status === 'published'" class="btn btn-sm btn-outline-info"
                    (click)="toggleStatus(schedule, 'completed')">
                    <i class="fas fa-flag-checkered"></i> –ó–∞–≤—ä—Ä—à–∏
                  </button>
                  <button *ngIf="schedule.status !== 'cancelled'" class="btn btn-sm btn-outline-warning"
                    (click)="toggleStatus(schedule, 'cancelled')">
                    <i class="fas fa-ban"></i> –û—Ç–º–µ–Ω–∏
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>